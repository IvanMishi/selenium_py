# Перемещение элементов (Drag and Drop)

## Инженер по тестированию переходит в директорию, предназначенную для хранения файлов с тестами
```
cd selenium_tests
```
## Из директории selenium_tests активирует виртуальное окружение
```sh
source selenium_env/bin/activate
```
## В активированном окружении запускает тест 
```sh
python3 test_(drag_and_drop)/test_A.py
```
## Для вывода результата в отдельный файл зпускает командой 
```sh
python3 test_(drag_and_drop)/test_A.py >> test_(drag_and_drop)/output.txt
```
Где test_A.py -  скрипт с тестом, а output.txt - файл, в который будет записан вывод теста.



## Тестовые данные test_A

- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит красный бокс и серый бокс
- [x] Пермещает красный бокс на серый

#### В программе использует: \
Операция перемещения элемента из одной позиции в другую\
```ActionChains(webdriver).drag_and_drop(drag_element, drop_element).perform()``` \
drag_element - элемент, который нужно перетаскивать.\
drop_element -  целевой элемент, куда будем перемещать иcходный элемент.

## Тестовые данные test_B

- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит синий бокс и контрольные точки
- [x] Перемеещает синий бокс через каждую контрольную точку

#### В программе использует: 
Операция захвата и удержания элемента. \
```ActionChains(webdriver).click_and_hold(drag_element).perform()``` \
Операция для перемещения указателя мыши c удерживаемым элементом к указанному элементу веб-страницы. \
```ActionChains(webdriver).move_to_element(point).perform()``` \
Операция отпускания удерживаемого элемента после перемещения по элементам веб-страницы. \
```ActionChains(webdriver).release(drag_element).perform()```


## Тестовые данные test_C
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит вертикальный ряд из 10-ти зеленых боксов слева и серую область для перемещения в нее справа
- [x] Высчитывает шиину экрана и перемещает на это расстояние каждый зеленый бокс в серую область

#### В программе использует: 
Устанавливает фиксированый размер окна при запуске браузера \
```webdriver.set_window_size(1200, 900)```
element — это объект элемента для перемещения - зеленый бокс. \
```webdriver.get_window_size()["width"]``` — возвращает текущую ширину окна браузера. \
```ActionChains(webdriver).drag_and_drop_by_offset(element, (```
        ```webdriver.get_window_size()["width"] - (drop_area.size['width'])), 0).perform()``` \
Это ширина области, куда перемещает элемент. \
```drop_area.size['width']``` 
Выражение  вычисляет горизонтальное смещение, на которое нужно переместить элемент, сдвигая его к правому краю окна.\
```(webdriver.get_window_size()["width"] - (drop_area.size['width']))```

## Тестовые данные test_D
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит красный бокс и четыре пронумерованых серых блока
- [x] Перемещает красный бокс по каждому из четырех блоков

#### В программе использует: 
Операция перемещения элемента из одной позиции в другие.\
```for drop in drop_boxs:```
        ```ActionChains(webdriver).drag_and_drop(drag_box, drop).perform()```


## Тестовые данные test_E
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит цветные боксы и цветные блоки
- [x] Перемещает каждый цветной бокс в каждый цветной блок по цвету

#### В программе использует: 
Получает класс перемещаемого и целевого элемента, по этому классу определяет цвет каждого из них.\
```.get_attribute("class")```\
Проверяет, совпадают ли цвета перемещаемого и целевого элемента \
```if 'red' in drag_class and 'red' in drop_class:```\
После чего можно выполнить операцию перемещения элемента из одной позиции в другую\
```ActionChains(webdriver).drag_and_drop(drag, drop).perform()```

## Тестовые данные test_F
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит цветные шарики и блоки для перемещения
- [x] Преобразует цветовые значения перемещаемого элемента и целевого элемента в rgb
- [x] Перемещает каждый цветной шарик в каждый цветной блок по цвету

#### В программе использует: 
Модуль Color из selenium.webdriver.support.color используется для работы с цветами в Selenium. \
Он конвертирует цветовые значения между форматами Hex (например, #FFFFFF), RGBA (например, rgba(255, 255, 255, 1)) и HSL. \
Основная задача модуля — упрощение работы с цветами в автоматизированном тестировании веб-приложений, позволяя получать и преобразовывать цвета для последующих проверок.\

```if Color.from_string(drag.value_of_css_property('background-color')).rgb == Color.from_string(```
                ```drop.value_of_css_property('border-color')).rgb:``` \
Проверяет, совпадают ли цвета перемещаемого и целевого элемента, после преобразования в цветовое значение rgb, затем можно выполнить операцию перемещения.


## Тестовые данные test_G
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит цветные боксы и цветные области для перемещения
- [x] Для перемещения на нужное расстояние получает данные из элемента


#### В программе использует: 
Преобразование текста в число: \
```distance_text.split(': ')[1]``` - разбивает строку по символу ':' и берет вторую часть (после двоеточия). \
```.replace('px', '')``` - убирает символы px, чтобы осталась только числовая часть. \
```int(...)``` - преобразует полученную строку в целое число. \
```.``` \ 
```ActionChains(webdriver).drag_and_drop_by_offset(drag, distance, 0).perform()``` \
Операция перемещения элемента на заданное расстояние от текущего положения \
xoffset — смещение по оси X \
yoffset — смещение по оси Y

## Тестовые данные test_H
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Находит слайдеры c дефолтным значением и элементы с целевым значеним для перемещения слайдеров
- [x] Перемещает каждый слайден в требуемое целевое значение


#### В программе использует: 

Цикл по контейнерам:
Перебирает элементы из списка контейнеров слайдеров.
```for slider in slider_container_list:```
Поиск слайдера:
Для каждого контейнера ищет элемент с классом "volume-slider".
```volume_slider = slider.find_element(By.CLASS_NAME, "volume-slider")```

Получение значений:
Получает текущее значение слайдера через get_attribute("value") и целевое значение из элемента с классом "target-value".
```value = int(volume_slider.get_attribute("value"))```
```target_value = int(slider.find_element(By.CLASS_NAME, "target-value").text)```

Использует цикл while, который продолжает выполняться до тех пор, пока текущее значение не совпадет с целевым.\
```while value != target_value:```
```if value < target_value:``
        ``` volume_slider.send_keys(Keys.ARROW_RIGHT)```
                ```value += 1```
``` else:```
        ```volume_slider.send_keys(Keys.ARROW_LEFT)```
                ```value -= 1```
Если value < target_value, то слайдер перемещается вправо (Keys.ARROW_RIGHT), и value увеличивается на 1.\
Если value >= target_value, слайдер движется влево (Keys.ARROW_LEFT), и value уменьшается на 1. \
Цикл продолжается, пока значение не станет равным целевому.