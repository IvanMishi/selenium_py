# Явные ожидания (Explicit Waits)  

## Инженер по тестированию переходит в директорию, предназначенную для хранения файлов с тестами
```
cd selenium_tests
```
## Из директории selenium_tests активирует виртуальное окружение
```sh
source selenium_env/bin/activate
```
## В активированном окружении запускает тест 
```sh
python3 test_(waits)/test_A.py
```
## Для вывода результата в отдельный файл зпускает командой 
```sh
python3 test_(waits)/test_A.py >> test_(waits)/output.txt
```
Где test_A.py -  скрипт с тестом, а output.txt - файл, в который будет записан вывод теста.


## Проверка видимости и присутствия элементов в HTML
WebDriverWait(browser, poll_frequency=0.5, timeout=10).until(EC.presence_of_element_located((locator)))
Если метод работает с одним элементом → он возвращает WebElement
Если метод работает с несколькими элементами → он возвращает list[WebElement]

## Тестовые данные test_A
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ждет когда кнопка станет кликбельной
- [x] После успешного нажатия на кнопку ожидает полного совпадения заголовка, если заголовок совпадает выводит текст из элемента с id='result' в консоль\
#### В программе использует явные ожидания: 
``` .element_to_be_clickable()``` \
Это условие, предназначено для ожидания, пока элемент на веб-странице не станет видимым и доступным для клика. \
```.title_is()``` \
Ожидание проверки заголовка страницы. title - ожидаемый заголовок, который должен быть точным совпадением, возвращает True, если заголовок совпадает, в противном случае - false. 
Заголовок страницы является важным индикатором правильности навигации по сайту. 
Он помогает удостовериться, что вы находитесь на нужной странице, особенно при автоматизации процесса. При вызове условия Selenium сравнивает текущий заголовок страницы с заданной строкой. Если они совпадают, условие считается выполненным.

## Тестовые данные test_B
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ждет когда кнопка станет кликбельной и нажимает на нее
- [x] После успешного нажатия на кнопку ожидает частичного совпадения заголовка, если заголово совпадает выводит текст из элемента с id='result' в консоль
#### В программе использует явные ожидания: 
```title_contains()```\
Ожидание проверки заголовка страницы. \
title - ожидаемый заголовок, который должен частично совпадать, возвращает True, если заголовок частично совпадает, в противном случае - false.
В некоторых случаях точное совпадение заголовка не требуется; достаточно, чтобы он содержал определённую фразу или слово. 
Это особенно полезно для динамически обновляемых заголовков или когда важно подтвердить общую тему страницы, а не конкретное название.
Условие проверяет, содержится ли заданная строка в текущем заголовке страницы (внутри тега <title>), и если да, то считается выполненным.

## Тестовые данные test_C
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ждет когда кнопка станет кликбельной и нажимает на нее
- [x] После успешного нажатия на кнопку ожидает появления элемента с class="BMH21YY",  если элемент видим на странице выводит текст из появившегося элемента в консоль.
#### В программе использует явные ожидания: 
```.visibility_of()```\
Это условие ожидания, которое проверяет, является ли конкретный и уже найденый элемент видимым на веб-странице.\
Элемент не только присутствует в DOM-структуре страницы, но и виден пользователю (например, у него нет атрибутов display: none или visibility: hidden).


## Тестовые данные test_D
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ждет когда элемент с ID="qQm9y1rk" появится на странице и виден пользователю.
- [x] Если элемент присутствует на странице, выводит текст из элемента в консоль.
#### В программе использует явные ожидания: 
```.presence_of_element_located()``` \
Это одно из ожидаемых условий , которое помогает убедиться, что элемент присутствует на веб-странице\ 
"присутствие" не означает "видимость". То есть элемент может быть на странице, но скрыт от пользователя (например, имеет стиль display: none; или visibility: hidden;).
Метод не сработает:
Если элемент вообще не загружен в DOM, Нужно подождать с WebDriverWait и presence_of_element_located()
Если сайт использует display: flex/grid/inline-block, тогда вместо display = 'block' надо вернуть его оригинальное состояние: ```browser.execute_script("arguments[0].style.display = '';", element)```
Если скрытие элемента завязано на JS-фреймворки (React, Vue, Angular) Тогда после изменения стиля, JS может снова скрыть элемент. Решение — имитировать пользовательское действие (клик, ввод), а не просто менять стили.
 ```presence_of_all_elements_located()``` \
 В некоторых случаях необходимо работать с группой элементов, такими как списки или кнопки. 
 Используя это условие, можно убедиться, что все элементы загрузились и присутствуют на странице перед началом взаимодействия с ними. 
 Метод проверяет наличие указанных локатором элементов в DOM-структуре, однако стоит помнить, что "присутствие" не гарантирует их "видимость".




## Тестовые данные test_E
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ждет когда элементы из подготовленого списка с id появится на странице и станут видны пользователю.
- [x] Нажимает на каждый видимый и доступныйэлемент из списка
#### В программе использует явные ожидания: 
```.visibility_of_element_located()``` \
Это одно из ожидаемых условий, позволяющее убедиться, что элемент не только присутствует на странице, но и видим пользователю. \
Это условие учитывает не только наличие элемента в DOM-структуре страницы, но и его реальную видимость на экране.
```visibility_of_any_elements_located()```
Ожидаемое условие проверяет видимость хотя бы одного элемента из группы элементов, соответствующих заданному локатору. 
Локатор остается прежним, а необходимость условия заключается в том, что на странице может быть несколько элементов с одинаковыми характеристиками, и важно удостовериться, что хотя бы один из них виден пользователю перед продолжением выполнения кода.
Условие ищет все элементы по локатору и возвращает список видимых. Если список не пуст, условие считается выполненным.
```visibility_of_all_elements_located()```
Ожидаемое условие, которое проверяет, что все элементы, соответствующие указанному локатору, видимы на веб-странице.
Данное условие важно, поскольку в некоторых ситуациях нужно убедиться, что каждый элемент группы доступен пользователю, как, например, при проверке видимости всех пунктов меню или доступности чекбоксов для выбора.
Условие выполняет поиск всех элементов по заданному локатору. Выполнение условия считается успешным, если все найденные элементы видимы.



## Тестовые данные test_F
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ожидает появление рекламного окна и закрывает его
- [x] Убеждается что окно стало невидимым
- [x] Если окно невидимо и появилась кнопка, нажимает на нее
- [x] После чего выводит текст из элмента с id='message', если текст присутствует в нем
#### В программе использует явные ожидания: 
```.invisibility_of_element_located()``` \
Это условие проверяет, что элемент, указанный локатором, больше не видим на веб-странице. \
Условие lambda d: d.find_element(By.ID, 'message').text != "" проверят, что текст в элементе присутствует. 


## Тестовые данные test_G
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ищет все кнопки на странице и нажимает на каждую, если в кнопке появляется текст при нажатии сохраняет его в список.
- [x] Если появляется рекламное окно, закрывает его и продолжает нажимать на кнопки и сохранять текст. 
- [x] Выводит в консоль в качестве ответа сохраненный текст из списка, разделяя его символом '-'.
#### В программе использует явные ожидания: 
```until(lambda d: button.text != "")```\
 Ждет, пока текст элемента кнопки (сохраненного в переменной button) не станет ненулевым (то есть, пока текстовое содержимое кнопки не станет непустым). Как только условие выполнится, ожидание завершится, и выполнение кода продолжится.


## Тестовые данные test_H
- [x] Незарегестированный пользователь переходит по ссылке
- [x] Ищет все элементы 'чекбокс' и 'кнопка' на странице
- [x] Убеждается, что 'чекбокс' отмечен, после чего нажимает кнопку 
- [x] После того как все чекбоксы проверены
#### В программе использует явные ожидания: 
```.element_to_be_selected()```\
Это ожидаемое условие в Selenium, которое проверяет, выбран ли предоставленный элемент на веб-странице. Это условие чаще всего используется для работы с элементами формы, такими как чекбоксы, радиокнопки или опции в выпадающем списке.


## Тестовые данные test_I
- [x] Незарегестированный пользователь переходит по ссылке

#### В программе использует явные ожидания: 
