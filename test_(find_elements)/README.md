# Поиск элементов с помощью Selenium

## Инженер по тестированию переходит в директорию, предназначенную для хранения файлов с тестами
```
cd selenium_tests
```
## Из директории selenium_tests активирует виртуальное окружение
```sh
source selenium_env/bin/activate
```
## В активированном окружении запускает тест 
```sh
python3 test_(find_elements)/test_A.py
```
## Для вывода результата в отдельный файл зпускает командой 
```sh
python3 test_(find_elements)/test_A.py >> test_(find_elements)/output.txt
```
Где test_A.py -  скрипт с тестом, а output.txt - файл, в который будет записан вывод теста.



HTML (HyperText Markup Language) — это язык разметки, который указывает браузеру, как отображать веб-страницу. \
Основу сайтов составляют теги, которые могут содержать другие, формируя многослойную структуру. \
Основная работа по автоматизации веб-страниц заключается в извлечении нужной информации из HTML-тегов. \
Атрибуты элементов указывают, какие точно идентификаторы необходимы для получения данных. \



Элемент(Element): открывающий тег, закрывающий тег и контент в совокупности формируют полноценный HTML-элемент.\
<p> class='text highlight' id='unique' Content          </p>
<p>  - Открывающий тег   
class - имя атрибута    'text highlight' - значение атрибута в кавычках с двойным классом.
разделены пробельным символом с следующим атрибутом.
id - имя атрибута       'unique  - значение атрибута в кавычках.
Контент (Content) - содержимое элемента, текст.
</p>  - Закрывающий тег

### Атрибут #id
Описание: Уникальный идентификатор элемента на всей странице может быть только один id, самый надежный способ создания локаторов.
```By.ID, 'user-profile'```

### Атрибут .class
Описание: Задает один или несколько классов для элемента. Классы используются для группировки элементов (например, все карточки товаров могут иметь класс product-card) и для применения стилей CSS.
```By.CLASS_NAME, 'product-card'```

### Атрибут href
Описание: Задает URL-адрес для ссылок (тег <a>). Это основной способ собрать необходимые ссылки со страницы, например, для перехода на следующие страницы (пагинация) или для скачивания файлов.
```.get_attribute('href')```

### Атрибут src
Описание: Указывает источник (URL) для медиа-элементов, таких как изображения (<img>), скрипты (<script>), фреймы (<iframe>).
```.get_attribute('src')```

### Атрибут alt
Описание: Задает альтернативный текст для изображений (тег <img>). Этот текст отображается, если изображение не может быть загружено, и используется программами чтения с экрана, содержит текст с описанием элемента.
```.get_attribute('alt')```

### Атрибут title
Описание: Предоставляет дополнительную информацию об элементе в виде всплывающей подсказки при наведении курсора мыши.
```.get_attribute('title')```

### Атрибут style
Описание: Используется для применения встроенных CSS-стилей непосредственно к элементу. Может указывать на состояние элемента (например, style="display: none;" означает, что элемент скрыт)
```style_attribute = div.get_attribute('style')```
```if 'display: none' not in style_attribute:```
```    print("Элемент видим:", div.text)```

### Атрибуты data-*
Описание: Пользовательские атрибуты данных, предназначенные для хранения дополнительной информации об элементе, которая не связана со стилями или стандартным поведением. 
Веб-разработчики часто используют data-* атрибуты для хранения машиночитаемых данных, таких как ID товара, артикул, цена без форматирования, URL для AJAX-запроса и т.д.
```get_attribute('data-price')```


Пример структуры HTML:
<!DOCTYPE html>                      <!-- Объявление типа документа -->
<html>                               <!-- Корневой элемент -->
  <head>                             <!-- Секция с метаданными -->
    <meta charset="UTF-8">           <!-- Кодировка страницы -->
    <title>Интернет-магазин</title>  <!-- Заголовок страницы - название страницы в браузере, отображается во вкладке.-->
    
    <style>    <!-- Стили CSS для оформления карточки, чаще указывает на файл со стилями -->
      /* CSS для оформления карточки товара */
      .product-card {
        border: 1px solid #ccc;
        padding: 15px;
        width: 300px;}
      .product-title {font-size: 1.2em;}
      .product-price {color: #e44d26;}
    </style>
  </head>

  <body>                      <!-- Тело страницы -->
    <h1>Каталог товаров</h1>  <!-- Главный заголовок -->
    
    <!-- Карточка товара -->
    <div class="product-card" id="product-1">                                                                    <!-- Контейнер товара с классом по которому можно найти группу тегов. -->
      <h2 class="product-title">Название товара</h2>                                                             <!-- Заголовок товара, помогает найти группу тегов. -->
      <img src="product-image.jpg" alt="Изображение товара" width="100">                                         <!-- Изображение товара с атрибутами src, alt и width -->
      <p class="product-description">Описание товара, которое подробно расскажет о его характеристиках.</p>      <!-- Описание  товара -->
      <p class="product-price">Цена: 1000 руб.</p>                                                               <!-- Цена товара -->
      <button type="button" onclick="addToCart('product-1')">Добавить в корзину</button>                         <!-- Кнопка добавления в корзину-->
    </div>
  </body>
</html>




DOM (Document Object Model) представляет собой набор правил, определяющих структуру веб-страницы на языке HTML. 
Он хранит сайт в виде дерева, где каждый элемент называется узлом. 
Узлы могут иметь неограниченную вложенность, но слишком глубокая структура может усложнить код и замедлить работу страницы.
Визуальное представление DOM-дерева: \
Document
└── html
    ├── head
    │   ├── meta
    │   ├── title
    │   └── style
    └── body
        ├── h1
        └── div.product-card
            ├── h2.product-title
            ├── img
            ├── p.product-description
            ├── p.product-price
            └── button


Практическое применение DOM заключается в его использовании для поиска и взаимодействия с элементами на веб-странице. \
При создании парсеров важно понимать структуру DOM и способы доступа к узлам, не внося в них изменения. \
Каждый элемент имеет уникальный путь от корня документа, как папки на ПК. Элементы можно находить по тегам, классам, ID, атрибутам или путям. \
DOM также облегчает перемещение между элементами, включая родительские, дочерние и соседние. При парсинге необходимо учитывать динамическое изменение элементов в DOM. \

 


## Тестовые данные test_A
- [x] Незарегистрированный пользователь переходит по ссылке.
- [x] Ищет все 'input' на веб странице.
- [x] Заполняет каждый найденый 'input' пользовательским текстом.
- [x] Нажимает  кнопку submit.
#### В программе использует 'поиск внутри списка элементов':
На странице несколько одинаковых блоков, в каждом из которых есть кнопка или другой элемент для взаимодействия.\
Ищет все элементы с тегом <input> на странице и возвращает их список для дальнейшего использования.\
 ```.find_elements```\
Цикл for перебирает список найденных элементов ввода, предоставляя доступ к каждому объекту для взаимодействия.\
```for element in input_elements:```\
Метод send_keys() используется для ввода текста в найденный элемент.\
``` element.send_keys('Пользовательский текст')```




## Тестовые данные test_B
- [x] Незарегистрированный пользователь переходит по ссылке.
- [x] Ищет родительский элмент 'input' и находит все его дочерние элементы на веб странице.
- [x] Заполняет каждый дочерний 'input' пользовательским текстом.
- [x] Нажимает  кнопку submit.
#### В программе использует 'каскадный поиск': 
Чтобы добраться до конкретного элемента, сначала ищет его родительский элемент, затем ищет дочерний внутри него.
Ищет родительский элемент\
```parent_element = webdriver.find_element(By.ID, 'parent_id')```\
Ищет дочерний элемент внутри родительского\
```child_element = parent_element.find_element(By.CLASS_NAME, 'child_class')```\
Проходит по каждому дочернему элемемену внутри родительского и вводит текст "Пользовательский текст"\
```[child_element.send_keys("пользовательский текст") for child_element in parent_element]```   




## Тестовые данные test_C
- [x] Незарегистрированный пользователь переходит по ссылке.
- [x] Ищет все элементы 'input' c помощью метода find_elements().
- [x] Если элементы найдены, заполняет каждый пользовательским текстом.
- [x] Нажимает  кнопку submit.
#### В программе использует 'проверку существования элементов': 
Сначала проверяет наличие интересующих элементов на странице, а затем взаимодействуйте с ними.\

Находим все элементы на странице с тегом "input".\
```input_elements = webdriver.find_elements(By.TAG_NAME, "input")```\
Cоздает пустой список для хранения найденных элементов.\
 ```input_elements_list = [] ```\
Перебирает все найденные элементы.\
```for element in input_elements: ```\
Добавляет каждый найденный элемент в список input_list.\
```input_elements_list.append(element)```\
Проверяеn, были ли найдены какие-либо элементы.\
 ```if input_elements:```\
Определяем количество элементов, которые нужно обработать.\
Устанавливает минимальное значение между длиной найденных элементов и длиной списка.\
 ```for i in range(min(len(input_elements), len(input_elements_list))): ```\
Заполняет текстовые поля элементов текстом "Ответ".\
 ```input_elements[i].send_keys("Пользовательский текст")```




## Тестовые данные test_D
- [x] Незарегистрированный пользователь переходит по ссылке.
- [x] Ищет все  элементы 'чекбокс' c помощью метода find_elements().
- [x] Если элементы найдены, кликает на  каждый найденый.
- [x] Если появляется 'alert' после клика по чекбоксу, переключается на него и принимает.
- [x] Нажимает  кнопку submit.
#### В программе использует: 
Поиск по 'проверке существования элементов'
